<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Trang Quản Trị - Furniture Shop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Quản lý sản phẩm nội thất</h2>
            <div>
                <button id="homeBtn" class="btn btn-secondary me-2">Về trang chủ</button>
                <button id="logoutBtn" class="btn btn-danger">Đăng xuất</button>
            </div>
        </div>

        <!-- Ô tìm kiếm -->
        <div class="mb-3">
            <input type="text" id="searchInput" class="form-control" placeholder="Tìm kiếm sản phẩm...">
        </div>

        <!-- Bảng danh sách sản phẩm -->
        <table class="table table-bordered" id="productTable">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Tên sản phẩm</th>
                    <th>Giá (VNĐ)</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
            <tbody id="productList"></tbody>
        </table>

        <!-- Nút thêm sản phẩm -->
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addProductModal">Thêm sản phẩm</button>
    </div>

    <!-- Modal thêm sản phẩm -->
    <div class="modal fade" id="addProductModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thêm sản phẩm</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="text" id="newName" class="form-control mb-2" placeholder="Tên sản phẩm">
                    <input type="number" id="newPrice" class="form-control" placeholder="Giá">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-success" id="saveProduct">Lưu</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let products = [
            { id: 1, name: "Ghế Sofa", price: 5000000 },
            { id: 2, name: "Bàn Gỗ", price: 2500000 },
            { id: 3, name: "Tủ Quần Áo", price: 7000000 }
        ];

        function renderProducts(filter = "") {
            let list = document.getElementById("productList");
            list.innerHTML = "";
            products
                .filter(p => p.name.toLowerCase().includes(filter.toLowerCase()))
                .forEach(p => {
                    list.innerHTML += `
                <tr>
                  <td>${p.id}</td>
                  <td>${p.name}</td>
                  <td>${p.price.toLocaleString()}</td>
                  <td>
                    <button class="btn btn-sm btn-danger" onclick="deleteProduct(${p.id})">Xóa</button>
                  </td>
                </tr>
              `;
                });
        }

        function deleteProduct(id) {
            products = products.filter(p => p.id !== id);
            renderProducts();
        }

        document.getElementById("saveProduct").addEventListener("click", function () {
            let name = document.getElementById("newName").value;
            let price = parseInt(document.getElementById("newPrice").value);
            if (name && price) {
                let newId = products.length ? products[products.length - 1].id + 1 : 1;
                products.push({ id: newId, name: name, price: price });
                renderProducts();
                document.getElementById("newName").value = "";
                document.getElementById("newPrice").value = "";
                bootstrap.Modal.getInstance(document.getElementById("addProductModal")).hide();
            }
        });

        document.getElementById("searchInput").addEventListener("input", function () {
            renderProducts(this.value);
        });

        // Nút về trang chủ
        document.getElementById("homeBtn").addEventListener("click", function () {
            window.location.href = "index.html";
        });

        // Nút đăng xuất
        document.getElementById("logoutBtn").addEventListener("click", function () {
            window.location.href = "login.html";
        });

        renderProducts();
    </script>
</body>
</html>
